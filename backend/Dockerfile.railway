# ğŸ›¡ï¸ FraudDetex - Railway Deployment
# Otimizado para Railway Pro ($5/mÃªs)

FROM denoland/deno:1.38.5

# Instalar dependÃªncias do sistema
RUN apt-get update && apt-get install -y \
    curl \
    && rm -rf /var/lib/apt/lists/*

# Definir diretÃ³rio de trabalho
WORKDIR /app

# Copiar arquivos de configuraÃ§Ã£o do Deno
COPY backend/deno.json backend/deno.lock ./

# Cache das dependÃªncias
RUN deno cache --lock=deno.lock deno.json

# Copiar cÃ³digo fonte
COPY backend/ ./

# Cache das dependÃªncias do projeto
RUN deno cache --lock=deno.lock main.ts

# Expor porta (Railway usa PORT env var)
EXPOSE $PORT

# Comando de inicializaÃ§Ã£o
CMD ["deno", "run", "--allow-all", "main.ts"]